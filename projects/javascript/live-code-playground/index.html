<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Code Playground</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/editor.css">
    <link rel="stylesheet" href="styles/console.css">
</head>
<body>
    <!-- Header Toolbar -->
    <header class="toolbar">
        <div class="toolbar-left">
            <h1 class="app-title">Code Playground</h1>
            <div class="save-indicator" id="saveIndicator">
                <span class="indicator-dot"></span>
                <span class="indicator-text">Saved</span>
            </div>
        </div>
        <div class="toolbar-right">
            <button class="toolbar-btn" id="newBtn" title="New Snippet (Ctrl+N)">
                <span>üìÑ</span> New
            </button>
            <button class="toolbar-btn" id="saveBtn" title="Save Snippet (Ctrl+S)">
                <span>üíæ</span> Save
            </button>
            <button class="toolbar-btn" id="loadBtn" title="Load Snippet">
                <span>üìÇ</span> Load
            </button>
            <button class="toolbar-btn" id="shareBtn" title="Share Code (Ctrl+K)">
                <span>üîó</span> Share
            </button>
            <button class="toolbar-btn" id="exportBtn" title="Export">
                <span>‚¨áÔ∏è</span> Export
            </button>
            <button class="toolbar-btn" id="themeBtn" title="Toggle Theme">
                <span>üåô</span>
            </button>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Editors Section -->
        <div class="editors-section" id="editorsSection">
            <!-- HTML Editor -->
            <div class="editor-pane">
                <div class="editor-header">
                    <span class="editor-label">HTML</span>
                    <button class="editor-clear-btn" data-editor="html">Clear</button>
                </div>
                <div class="editor-wrapper">
                    <div class="line-numbers" id="htmlLineNumbers"></div>
                    <div class="editor-content"
                         id="htmlEditor"
                         contenteditable="true"
                         spellcheck="false"
                         data-language="html"></div>
                </div>
            </div>

            <!-- CSS Editor -->
            <div class="editor-pane">
                <div class="editor-header">
                    <span class="editor-label">CSS</span>
                    <button class="editor-clear-btn" data-editor="css">Clear</button>
                </div>
                <div class="editor-wrapper">
                    <div class="line-numbers" id="cssLineNumbers"></div>
                    <div class="editor-content"
                         id="cssEditor"
                         contenteditable="true"
                         spellcheck="false"
                         data-language="css"></div>
                </div>
            </div>

            <!-- JavaScript Editor -->
            <div class="editor-pane">
                <div class="editor-header">
                    <span class="editor-label">JavaScript</span>
                    <button class="editor-clear-btn" data-editor="js">Clear</button>
                </div>
                <div class="editor-wrapper">
                    <div class="line-numbers" id="jsLineNumbers"></div>
                    <div class="editor-content"
                         id="jsEditor"
                         contenteditable="true"
                         spellcheck="false"
                         data-language="javascript"></div>
                </div>
            </div>
        </div>

        <!-- Resize Handle -->
        <div class="resize-handle horizontal" id="horizontalResize"></div>

        <!-- Output Section -->
        <div class="output-section" id="outputSection">
            <!-- Preview Panel -->
            <div class="preview-panel">
                <div class="panel-header">
                    <span class="panel-label">Preview</span>
                    <button class="panel-refresh-btn" id="refreshPreview">‚ü≥ Refresh</button>
                </div>
                <iframe id="previewFrame"
                        sandbox="allow-scripts allow-modals allow-forms allow-popups allow-pointer-lock"
                        title="Preview Frame"></iframe>
            </div>

            <!-- Vertical Resize Handle -->
            <div class="resize-handle vertical" id="verticalResize"></div>

            <!-- Console Panel -->
            <div class="console-panel">
                <div class="panel-header">
                    <span class="panel-label">Console</span>
                    <div class="console-controls">
                        <button class="console-filter-btn active" data-filter="all">All</button>
                        <button class="console-filter-btn" data-filter="log">Logs</button>
                        <button class="console-filter-btn" data-filter="warn">Warnings</button>
                        <button class="console-filter-btn" data-filter="error">Errors</button>
                        <button class="console-clear-btn" id="clearConsole">Clear</button>
                    </div>
                </div>
                <div class="console-content" id="consoleContent">
                    <div class="console-welcome">
                        Console ready. Your logs will appear here.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Save Modal -->
    <div class="modal" id="saveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Save Snippet</h2>
                <button class="modal-close" data-modal="saveModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="snippetName">Snippet Name</label>
                    <input type="text" id="snippetName" placeholder="My Awesome Snippet" required>
                </div>
                <div class="form-group">
                    <label for="snippetDescription">Description (optional)</label>
                    <textarea id="snippetDescription" placeholder="What does this snippet do?"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="saveModal">Cancel</button>
                <button class="btn btn-primary" id="confirmSave">Save</button>
            </div>
        </div>
    </div>

    <!-- Load Modal -->
    <div class="modal" id="loadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Load Snippet</h2>
                <button class="modal-close" data-modal="loadModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="snippet-list" id="snippetList">
                    <div class="snippet-list-loading">Loading snippets...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="loadModal">Close</button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal" id="shareModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Share Your Code</h2>
                <button class="modal-close" data-modal="shareModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Share this link with others:</p>
                <div class="share-url-container">
                    <input type="text" id="shareUrl" readonly>
                    <button class="btn btn-primary" id="copyUrlBtn">Copy</button>
                </div>
                <div class="share-success" id="shareSuccess">Link copied to clipboard!</div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-modal="shareModal">Close</button>
            </div>
        </div>
    </div>

    <!-- Event Loop Demo Modal -->
    <div class="modal" id="eventLoopModal">
        <div class="modal-content event-loop-content">
            <div class="modal-header">
                <h2>Event Loop Visualization</h2>
                <button class="modal-close" data-modal="eventLoopModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="event-loop-demo">
                    <div class="event-loop-section">
                        <h3>Call Stack</h3>
                        <div class="event-loop-stack" id="callStack"></div>
                    </div>
                    <div class="event-loop-section">
                        <h3>Macrotask Queue</h3>
                        <div class="event-loop-queue" id="macrotaskQueue"></div>
                    </div>
                    <div class="event-loop-section">
                        <h3>Microtask Queue</h3>
                        <div class="event-loop-queue" id="microtaskQueue"></div>
                    </div>
                </div>
                <div class="event-loop-controls">
                    <button class="btn btn-primary" id="runEventLoopDemo">Run Demo</button>
                    <button class="btn btn-secondary" id="stepEventLoop">Step</button>
                    <button class="btn btn-secondary" id="resetEventLoop">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-message" id="toastMessage"></span>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
